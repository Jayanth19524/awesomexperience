{"ast":null,"code":"import _objectSpread from\"/Users/jayanth/Downloads/awesomexperience/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/jayanth/Downloads/awesomexperience/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{TextField,Button,Typography,Paper}from'@material-ui/core';import FileBase from'react-file-base64';import useStyles from\"./styles\";import{useDispatch,useSelector}from'react-redux';import{createPost}from'../../actions/posts';import{updatePost}from'../../actions/posts';var Form=function Form(_ref){var _user$result3;var currentId=_ref.currentId,setCurrentId=_ref.setCurrentId;var classes=useStyles();var dispatch=useDispatch();var _useState=useState({title:\"\",message:\"\",tags:\"\",selectedFile:\"\"}),_useState2=_slicedToArray(_useState,2),postData=_useState2[0],setpostData=_useState2[1];var post=useSelector(function(state){return currentId?state.posts.find(function(p){return p._id===currentId;}):null;});var user=JSON.parse(localStorage.getItem('profile'));useEffect(function(){if(post)setpostData(post);},[post]);var handleSubmit=function handleSubmit(e){e.preventDefault();if(currentId){var _user$result;dispatch(updatePost(currentId,_objectSpread(_objectSpread({},postData),{},{name:user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name})));}else{var _user$result2;dispatch(createPost(_objectSpread(_objectSpread({},postData),{},{name:user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.name})));}clear();};var clear=function clear(){setCurrentId(null);setpostData({creator:\"\",title:\"\",message:\"\",tags:\"\",selectedFile:\"\"});};if(!(user===null||user===void 0?void 0:(_user$result3=user.result)===null||_user$result3===void 0?void 0:_user$result3.name)){return/*#__PURE__*/React.createElement(Paper,{className:classes.paper},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\",align:\"center\"},\"PLEASE SIGN IN TO CREATE A POST\"));}return/*#__PURE__*/React.createElement(Paper,{className:classes.paper},/*#__PURE__*/React.createElement(\"form\",{autoComplete:\"off\",noValidate:true,className:\"\".concat(classes.root,\" \").concat(classes.form),onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},currentId?\"edit\":\"share\",\" your experience\"),/*#__PURE__*/React.createElement(TextField,{name:\"title\",variant:\"outlined\",label:\"title\",value:postData.title,onChange:function onChange(e){return setpostData(_objectSpread(_objectSpread({},postData),{},{title:e.target.value}));},fullWidth:true},\" \"),/*#__PURE__*/React.createElement(TextField,{name:\"message\",variant:\"outlined\",label:\"message\",value:postData.message,onChange:function onChange(e){return setpostData(_objectSpread(_objectSpread({},postData),{},{message:e.target.value}));},fullWidth:true},\" \"),/*#__PURE__*/React.createElement(TextField,{name:\"tags\",variant:\"outlined\",label:\"tags\",value:postData.tags,onChange:function onChange(e){return setpostData(_objectSpread(_objectSpread({},postData),{},{tags:e.target.value.split(',')}));},fullWidth:true},\" \"),/*#__PURE__*/React.createElement(\"div\",{className:classes.fileInput},/*#__PURE__*/React.createElement(FileBase,{type:\"file\",multiple:false,onDone:function onDone(_ref2){var base64=_ref2.base64;return setpostData(_objectSpread(_objectSpread({},postData),{},{selectedFile:base64}));}})),/*#__PURE__*/React.createElement(Button,{className:classes.buttonSubmit,variant:\"contained\",color:\"primary\",size:\"large\",type:\"submit\",fullWidth:true},\"submit\"),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",size:\"small\",onClick:clear,fullWidth:true},\"clear\")));};export default Form;","map":{"version":3,"sources":["/Users/jayanth/Downloads/awesomexperience/client/src/components/Form/Form.js"],"names":["React","useState","useEffect","TextField","Button","Typography","Paper","FileBase","useStyles","useDispatch","useSelector","createPost","updatePost","Form","currentId","setCurrentId","classes","dispatch","title","message","tags","selectedFile","postData","setpostData","post","state","posts","find","p","_id","user","JSON","parse","localStorage","getItem","handleSubmit","e","preventDefault","name","result","clear","creator","paper","root","form","target","value","split","fileInput","base64","buttonSubmit"],"mappings":"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","sourcesContent":["\nimport React ,{useState,useEffect}from 'react';\nimport {TextField,Button,Typography,Paper} from '@material-ui/core'\nimport FileBase from 'react-file-base64'\nimport useStyles from \"./styles\";\nimport { useDispatch,useSelector } from 'react-redux';\n\nimport { createPost } from '../../actions/posts';\nimport { updatePost } from '../../actions/posts'\nconst Form = ({currentId,setCurrentId}) => {\n        const classes = useStyles();\n        const dispatch =  useDispatch();\n        const [postData,setpostData] = useState(\n            { title:\"\", message:\"\", tags:\"\", selectedFile:\"\"}\n        );\n        const post = useSelector((state)=> currentId ? state.posts.find((p)=>p._id===currentId):null)\n        const user = JSON.parse(localStorage.getItem('profile'));\n        useEffect(()=>{\n            if(post) setpostData(post);\n        },[post])\n        const handleSubmit = (e) => {\n            e.preventDefault();\n            if(currentId){\n                dispatch(updatePost(currentId,{...postData,name: user?.result?.name}));                \n            }\n            else{\n                dispatch(createPost({...postData,name: user?.result?.name}));               \n            }\n            clear();\n        }\n        const clear = () => {\n            setCurrentId(null);\n            setpostData({creator:\"\", title:\"\", message:\"\", tags:\"\", selectedFile:\"\"});\n        }\n    if(!user?.result?.name){\n        return (\n            <Paper className={classes.paper}>\n                <Typography variant=\"h6\" align=\"center\">\n                    PLEASE SIGN IN TO CREATE A POST\n                </Typography>\n\n            </Paper>\n        )\n    }\n    return(\n        <Paper className={classes.paper}>\n            <form autoComplete=\"off\" noValidate className={`${classes.root} ${classes.form}`} onSubmit={handleSubmit}>\n                <Typography variant=\"h6\">{currentId ?`edit`:`share`} your experience</Typography>\n                {/* <TextField name=\"creator\" variant=\"outlined\" label=\"creator\" value={postData.creator} onChange={(e)=>setpostData({...postData,creator:e.target.value})} fullWidth> </TextField> */}\n                <TextField name=\"title\" variant=\"outlined\" label=\"title\" value={postData.title} onChange={(e)=>setpostData({...postData,title:e.target.value})} fullWidth> </TextField>\n                <TextField name=\"message\" variant=\"outlined\" label=\"message\" value={postData.message} onChange={(e)=>setpostData({...postData,message:e.target.value})} fullWidth> </TextField>\n                <TextField name=\"tags\" variant=\"outlined\" label=\"tags\" value={postData.tags} onChange={(e)=>setpostData({...postData,tags:e.target.value.split(',')})} fullWidth> </TextField>\n            <div className={classes.fileInput}>\n                <FileBase type=\"file\" multiple={false} onDone={({base64})=> setpostData({...postData,selectedFile:base64})}></FileBase>\n            </div>\n            <Button className={classes.buttonSubmit} variant=\"contained\" color=\"primary\" size=\"large\" type=\"submit\" fullWidth>submit</Button>\n            <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={clear} fullWidth>clear</Button>\n            </form>\n\n\n        </Paper>\n    )\n}\nexport default Form;"]},"metadata":{},"sourceType":"module"}