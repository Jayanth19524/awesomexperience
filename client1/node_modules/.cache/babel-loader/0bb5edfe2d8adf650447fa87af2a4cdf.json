{"ast":null,"code":"import _slicedToArray from\"/Users/jayanth/Downloads/awesomexperience/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{AppBar,Avatar,Button,Toolbar,Typography}from'@material-ui/core';import{Link}from'react-router-dom';import useStyles from'./styles';import{useDispatch}from'react-redux';import{useHistory,useLocation}from'react-router-dom';import decode from'jwt-decode';var Navbar=function Navbar(){var classes=useStyles();var history=useHistory();var dispatch=useDispatch();var location=useLocation();var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];console.log(user);useEffect(function(){var token=user===null||user===void 0?void 0:user.token;//JWT\nif(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logOut();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);var logOut=function logOut(){dispatch({type:'LOGOUT'});history.push('/');setUser(null);};return/*#__PURE__*/React.createElement(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\"},/*#__PURE__*/React.createElement(\"div\",{className:classes.brandContainer},/*#__PURE__*/React.createElement(Typography,{component:Link,to:\"/\",className:classes.heading,variant:\"h4\",align:\"center\"},\"Experiences\")),/*#__PURE__*/React.createElement(Toolbar,{className:classes.toolbar},user?/*#__PURE__*/React.createElement(\"div\",{className:classes.profile},/*#__PURE__*/React.createElement(Avatar,{className:classes.purple,alt:user===null||user===void 0?void 0:user.result.name,src:user===null||user===void 0?void 0:user.result.imageUrl},user===null||user===void 0?void 0:user.result.name.charAt(0)),/*#__PURE__*/React.createElement(Typography,{className:classes.userName,variant:\"h6\"},user===null||user===void 0?void 0:user.result.name),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",className:classes.logout,color:\"secondary\",onClick:logOut},\"Logout\")):/*#__PURE__*/React.createElement(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\"},\" sign in \")));};export default Navbar;","map":{"version":3,"sources":["/Users/jayanth/Downloads/awesomexperience/client/src/components/Navbar/Navbar.js"],"names":["React","useEffect","useState","AppBar","Avatar","Button","Toolbar","Typography","Link","useStyles","useDispatch","useHistory","useLocation","decode","Navbar","classes","history","dispatch","location","JSON","parse","localStorage","getItem","user","setUser","console","log","token","decodedToken","exp","Date","getTime","logOut","type","push","appBar","brandContainer","heading","toolbar","profile","purple","result","name","imageUrl","charAt","userName","logout"],"mappings":"uKAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,MAAT,CAAgBC,MAAhB,CAAuBC,MAAvB,CAA8BC,OAA9B,CAAsCC,UAAtC,KAAwD,mBAAxD,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,UAAtB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,UAAT,CAAsBC,WAAtB,KAAyC,kBAAzC,CACA,MAAOC,CAAAA,MAAP,KAAmB,YAAnB,CACA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjB,GAAMC,CAAAA,OAAO,CAAGN,SAAS,EAAzB,CACA,GAAMO,CAAAA,OAAO,CAAGL,UAAU,EAA1B,CACA,GAAMM,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CACA,GAAMQ,CAAAA,QAAQ,CAAGN,WAAW,EAA5B,CACA,cAAqBV,QAAQ,CAACiB,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAD,CAA7B,wCAAOC,IAAP,eAAYC,OAAZ,eACAC,OAAO,CAACC,GAAR,CAAYH,IAAZ,EACAtB,SAAS,CAAC,UAAI,CACV,GAAM0B,CAAAA,KAAK,CAAGJ,IAAH,SAAGA,IAAH,iBAAGA,IAAI,CAAEI,KAApB,CACJ;AACA,GAAIA,KAAJ,CAAW,CACP,GAAMC,CAAAA,YAAY,CAAGf,MAAM,CAACc,KAAD,CAA3B,CAEA,GAAIC,YAAY,CAACC,GAAb,CAAmB,IAAnB,CAA0B,GAAIC,CAAAA,IAAJ,GAAWC,OAAX,EAA9B,CAAoDC,MAAM,GAC3D,CACHR,OAAO,CAACL,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAD,CAAP,CACH,CATY,CASX,CAACJ,QAAD,CATW,CAAT,CAUA,GAAMc,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjBf,QAAQ,CAAC,CAACgB,IAAI,CAAC,QAAN,CAAD,CAAR,CACAjB,OAAO,CAACkB,IAAR,CAAa,GAAb,EACAV,OAAO,CAAC,IAAD,CAAP,CAEH,CALD,CAMA,mBACA,oBAAC,MAAD,EAAQ,SAAS,CAAET,OAAO,CAACoB,MAA3B,CAAmC,QAAQ,CAAC,QAA5C,CAAqD,KAAK,CAAC,SAA3D,eACI,2BAAK,SAAS,CAAEpB,OAAO,CAACqB,cAAxB,eACA,oBAAC,UAAD,EAAY,SAAS,CAAE5B,IAAvB,CAA6B,EAAE,CAAG,GAAlC,CAAsC,SAAS,CAAEO,OAAO,CAACsB,OAAzD,CAAkE,OAAO,CAAC,IAA1E,CAA+E,KAAK,CAAC,QAArF,gBADA,CADJ,cAII,oBAAC,OAAD,EAAS,SAAS,CAAEtB,OAAO,CAACuB,OAA5B,EACKf,IAAI,cACD,2BAAK,SAAS,CAAER,OAAO,CAACwB,OAAxB,eACI,oBAAC,MAAD,EAAQ,SAAS,CAAExB,OAAO,CAACyB,MAA3B,CAAmC,GAAG,CAAEjB,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEkB,MAAN,CAAaC,IAArD,CAA2D,GAAG,CAAEnB,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEkB,MAAN,CAAaE,QAA7E,EAAwFpB,IAAxF,SAAwFA,IAAxF,iBAAwFA,IAAI,CAAEkB,MAAN,CAAaC,IAAb,CAAkBE,MAAlB,CAAyB,CAAzB,CAAxF,CADJ,cAEI,oBAAC,UAAD,EAAY,SAAS,CAAE7B,OAAO,CAAC8B,QAA/B,CAAyC,OAAO,CAAC,IAAjD,EAAuDtB,IAAvD,SAAuDA,IAAvD,iBAAuDA,IAAI,CAAEkB,MAAN,CAAaC,IAApE,CAFJ,cAGI,oBAAC,MAAD,EAAQ,OAAO,CAAC,WAAhB,CAA4B,SAAS,CAAE3B,OAAO,CAAC+B,MAA/C,CAAuD,KAAK,CAAC,WAA7D,CAAyE,OAAO,CAAEd,MAAlF,WAHJ,CADC,cAQG,oBAAC,MAAD,EAAQ,SAAS,CAAExB,IAAnB,CAAyB,EAAE,CAAC,OAA5B,CAAoC,OAAO,CAAC,WAA5C,CAAwD,KAAK,CAAC,SAA9D,cATZ,CAJJ,CADA,CAsBH,CA7CD,CA8CA,cAAeM,CAAAA,MAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { AppBar,Avatar,Button,Toolbar,Typography } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\nimport useStyles from './styles';\nimport { useDispatch } from 'react-redux';\nimport { useHistory , useLocation } from 'react-router-dom';\nimport decode from 'jwt-decode';\nconst Navbar = () => {\n    const classes = useStyles();\n    const history = useHistory();\n    const dispatch = useDispatch();\n    const location = useLocation();\n    const [user,setUser]=useState(JSON.parse(localStorage.getItem('profile')));\n    console.log(user);\n    useEffect(()=>{\n        const token = user?.token;\n    //JWT\n    if (token) {\n        const decodedToken = decode(token);\n  \n        if (decodedToken.exp * 1000 < new Date().getTime()) logOut();\n      }\n    setUser(JSON.parse(localStorage.getItem('profile')));\n},[location]);\n    const logOut = () => {\n        dispatch({type:'LOGOUT'});\n        history.push('/');\n        setUser(null);\n\n    }\n    return (\n    <AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\n        <div className={classes.brandContainer}>\n        <Typography component={Link} to = '/' className={classes.heading} variant=\"h4\" align=\"center\">Experiences</Typography>\n        </div>\n        <Toolbar className={classes.toolbar}>\n            {user ? (\n                <div className={classes.profile}>\n                    <Avatar className={classes.purple} alt={user?.result.name} src={user?.result.imageUrl}>{user?.result.name.charAt(0)}</Avatar>\n                    <Typography className={classes.userName} variant=\"h6\">{user?.result.name}</Typography>\n                    <Button variant=\"contained\" className={classes.logout} color=\"secondary\" onClick={logOut}>Logout</Button>\n                </div>\n            ):(\n              \n                    <Button component={Link} to=\"/auth\" variant=\"contained\" color=\"primary\"> sign in </Button>\n                \n            )}\n        </Toolbar>\n\n\n    </AppBar>\n    );\n}\nexport default Navbar;"]},"metadata":{},"sourceType":"module"}